name: CI Build do Projeto PIM

on:
  push:
    branches: [ main, master ] # Aciona o workflow em push para as branches main ou master
  pull_request:
    branches: [ main, master ] # Aciona o workflow em pull request para as branches main ou master

jobs:
  build:
    runs-on: ubuntu-latest # O ambiente onde o workflow será executado

    steps:
    - uses: actions/checkout@v4 # Faz o checkout do seu código no runner
      with:
        fetch-depth: 0 # Necessário para algumas ferramentas de análise de código, se for usar no futuro

    - name: Setup .NET SDK
      uses: actions/setup-dotnet@v4
      with:
        dotnet-version: '8.0.x' # **AJUSTE AQUI:** Use a versão do .NET que seu projeto utiliza (ex: '6.0.x', '7.0.x')

    - name: Setup Node.js
      uses: actions/setup-node@v4
      with:
        node-version: '20.x' # **AJUSTE AQUI:** Use a versão do Node.js que seu projeto utiliza

    - name: Restaurar Dependências e Construir Backend (C# ASP.NET Core)
      run: |
        # **AJUSTE AQUI:** Substitua 'backend/SeuProjetoBackend.csproj' pelo caminho real do seu arquivo .csproj do backend.
        # Se você tiver um arquivo .sln na raiz do backend, pode usar 'dotnet restore backend/SeuProjetoBackend.sln'
        dotnet restore backend/SeuProjetoBackend.csproj
        dotnet build backend/SeuProjetoBackend.csproj --no-restore --configuration Release

    - name: Restaurar Dependências e Construir Frontend Web (HTML/CSS/JS)
      run: |
        cd frontend-web
        npm install # **AJUSTE AQUI:** Use 'yarn install' ou 'pnpm install' se for o caso
        npm run build # **AJUSTE AQUI:** Use 'yarn build' ou 'pnpm build' se for o caso, ou o comando de build do seu framework

    - name: Restaurar Dependências Frontend Mobile (C# Xamarin/.NET MAUI)
      run: |
        # **AJUSTE AQUI:** Substitua 'frontend-mobile/SeuProjetoMobile.csproj' pelo caminho real do seu arquivo .csproj mobile.
        # Se você tiver um arquivo .sln na raiz do frontend-mobile, pode usar 'dotnet restore frontend-mobile/SeuProjetoMobile.sln'
        dotnet restore frontend-mobile/SeuProjetoMobile.csproj

    - name: Restaurar Dependências Frontend Desktop (C# WPF/WinForms/.NET MAUI)
      run: |
        # **AJUSTE AQUI:** Substitua 'frontend-desktop/SeuProjetoDesktop.csproj' pelo caminho real do seu arquivo .csproj desktop.
        # Se você tiver um arquivo .sln na raiz do frontend-desktop, pode usar 'dotnet restore frontend-desktop/SeuProjetoDesktop.sln'
        dotnet restore frontend-desktop/SeuProjetoDesktop.csproj

    # Você pode adicionar mais passos aqui, como rodar testes, análise de código, etc.
